<!DOCTYPE HTML>
<html>
	<head>
		<title>DynamicProgrammer presentations</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="../../assets/css/style.css" type="text/css">
		<link rel="stylesheet" href="../../assets/css/default.css" type="text/css">
		<link rel="stylesheet" href="../../assets/css/agate.css" type="text/css">
	</head>
	<body>
		<div class="vertical-center">
      <div class="vertical-container">
        <pre><code class="lang-csharp"><span class="hljs-comment">//Implements IPayment</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">var</span> paymentRequestValidator = PaymentRequestValidatorFactory.Create(request.body);

  <span class="hljs-keyword">var</span> paymentRequest = paymentRequestValidator.validate();

  <span class="hljs-keyword">var</span> paymentProviderPayloadAdapter = PaymentProviderPayloadAdapterFactory.Create(paymentRequest.type);

  <span class="hljs-keyword">var</span> paymentProvider = PaymentProviderFactory.Create(paymentRequest, config); <span class="hljs-comment">//Implements IProviderFactory</span>

  <span class="hljs-keyword">var</span> paymentProviderResponse = paymentProvider.Pay(paymentProviderPayloadAdapter.adaptRequest(paymentRequest));

  <span class="hljs-keyword">var</span> adaptedResponse = paymentProviderPayloadAdapter.adaptRequest(paymentProviderResponse);

} <span class="hljs-keyword">catch</span> (ConnectException e) {

} <span class="hljs-keyword">catch</span> (OutOfFundsException e) {

} <span class="hljs-keyword">catch</span> (ExpiredCCException e) {

} <span class="hljs-keyword">catch</span> (AvsException e) {

} <span class="hljs-keyword">catch</span> (AddressMissMatchException e) {

} <span class="hljs-keyword">catch</span> (InvalidCCForAccountException e) {

} <span class="hljs-keyword">catch</span> (InvalidCredentialsException e) {
} <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">Exception</span> e) {
  <span class="hljs-comment">// Handle unknown Exception</span>
} <span class="hljs-keyword">finally</span> {
  <span class="hljs-comment">// Do some clean up here</span>
}
</code></pre>
<blockquote>
<p>Yes this code can be made a bit cleaner</p>
<p>Not all exceptions should be handle here and not all code live at the same level.</p>
</blockquote>

      </div>
		</div>
		<footer class="hidden">
      <div class="b">
        <button onclick="DynamicProg.codeRunner('.lang-javascript-c1')">RUN!</button>
      </div>
      <div class="cli"></div>
		</footer>
  <script src="../../assets/js/lib.js"></script>
	</body>
</html>
